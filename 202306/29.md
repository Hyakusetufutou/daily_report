# 2023/6/30日報

## 取り組んだ課題一覧
- 達人に学ぶDB設計徹底指南書 7章〜9章

## わかったこと
### 論理設計のバッドノウハウ
#### 配列型による非スカラ値
- アプリケーションやミドルウェアも配列型に対応しなければならないためハードルが高い
- 第一正規形を優先する

#### ダブルネーミング
- 列は変数でないため、一度意味を決めると変更が不可

#### 単一参照テーブル
- コード体系によって列長が違うため、余裕を見た大きめの可変長文字列型にする必要がある
- レコード数が多くなり、検索パフォーマンスが悪化する
- コードタイプやコード値を間違えて指定してもエラーにならずバグに気づきにくい

→テーブルにポリモーフィズムは不要

#### テーブル分割
- 分割する理由がない
- 拡張性に乏しい
- 他の代替手段がある(パーティション等)

#### 不適切なキー
- 可変長文字列は普遍性がないためキーには向かない
- キーには固定長文字列のコード列が望ましい

### 論理設計のグレーノウハウ
#### オートナンバリング
主キーを一意に決められない場合に、オートナンバリングをキーとして扱う場合には注意が必要<br>

- シーケンスとID列では、シーケンスの方が柔軟で拡張性に富む
- アプリケーション側でオートナンバリングを実装すると、排他制御等の考慮が必要となるので複雑となる

#### 列持ちテーブル
**利点**<br>
- シンプルな設計
- 入出力のフォーマットと合わせやすい

**欠点**<br>
- 列の増減が難しい
- 無用のNULLを使用しなければならない

#### 多段ビュー
- ビューはビュー定義のSELECT文を実行してオリジナルのテーブルにアクセスしている
- 多段になるとパフォーマンスが落ち、また仕様が複雑となり管理が困難になる


## 次やること
- 達人に学ぶDB設計徹底指南書 感想作成

## 感じたこと
- オートナンバリングをアプリケーション側で管理すると排他制御等複雑になることがわかった
- テーブルの無意味な分割等は当たり前だがやらない方がいいことがわかった

## 学習時間
- Today: ２h
- Total: 378h30min

